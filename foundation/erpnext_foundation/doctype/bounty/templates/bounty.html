{% extends "templates/web.html" %}

{% block page_content %}
<style>
	.main {
		margin-bottom: 50px;
	}

	input[type=number] {
		width: 200px;
		margin-bottom: 12px;
	}

	p.lead {
		margin-bottom: 10px;
	}
</style>

<div class="main">
<h1>{{ title }} <span style="font-size: 14px; line-height: 44px;" class="pull-right small">{{days_to_go}} days to go</span></h1>
{% set bounty_progress = ((doc.bounty_collected/doc.goal)*100) %}
<div class="progress" style="height: 12px;">
	<div class="progress-bar progress-bar-success" role="progressbar"
		aria-valuenow="{{bounty_progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{bounty_progress}}%">
		<span class="sr-only">{{ doc.bounty_collected }} of {{ doc.goal }}</span>
	</div>
</div>
<p>
	<p class="lead">{{ fmt_money(doc.bounty_collected, currency="USD") }}
		<span class="text-muted small"> of {{ fmt_money(doc.goal, currency="USD") }}</span>
	</p>
	<p class="lead">
		<span>{{ no_of_backers }}</span>
	</p>
	{% if doc.github_issue %}
	<p>
		<a href="{{doc.github_issue}}" target="_blank">GitHub Issue</a>
	</p>
	{% endif %}
	<p>
		<input type="number" data-field="amount" class="form-control" placeholder="{{fmt_money(bounty_left)}}">
		<a data-action="primary" class="btn btn-primary">
			Back this bounty
		</a>
	</p>
</p>
<script>
	frappe.ready(function() {
		$('[data-action="primary"]').click(function() {
			var url = "/bounty/back-this-bounty?bounty_name={{doc.name}}&user=" + frappe.session.user;
			var amount = $('[data-field="amount"]').val();
			if(amount > 0) {
				url += '&amount=' + amount;
			}
			window.location.href = url;
		})
	})
</script>

</div>
<p>
	<h4>About this feature</h4>
	<p>{{doc.description}}</p>
</p>
<hr style="margin: 50px 0;">
<h3>Discuss</h3>
{% include 'templates/includes/comments/comments.html' %}

{% endblock %}

<!-- this is a sample default web page template -->